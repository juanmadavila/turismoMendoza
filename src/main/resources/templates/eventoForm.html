<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
    <head>
        <title>Turismo Mendoza - Evento</title>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    </head>
    <body>

        <!--        <div class="pac-card" id="pac-card">
                    <div>
                        <div id="title">Autocomplete search</div>
                        <div id="type-selector" class="pac-controls">
                            <input
                                type="radio"
                                name="type"
                                id="changetype-all"
                                checked="checked"
                                />
                            <label for="changetype-all">All</label>
        
                            <input type="radio" name="type" id="changetype-establishment" />
                            <label for="changetype-establishment">Establishments</label>
        
                            <input type="radio" name="type" id="changetype-address" />
                            <label for="changetype-address">Addresses</label>
        
                            <input type="radio" name="type" id="changetype-geocode" />
                            <label for="changetype-geocode">Geocodes</label>
                        </div>
                        <br />
                        <div id="strict-bounds-selector" class="pac-controls">
                            <input type="checkbox" id="use-location-bias" value="" checked />
                            <label for="use-location-bias">Bias to map viewport</label>
        
                            <input type="checkbox" id="use-strict-bounds" value="" />
                            <label for="use-strict-bounds">Strict bounds</label>
                        </div>
                    </div>
                    <div id="pac-container">
                        <input id="pac-input" type="text" placeholder="Enter a location" />
                    </div>
                </div>-->
        <!--        <div class="container mt-4 w-75 h-75" id="map"></div>
                <div id="infowindow-content">
                    <span id="place-name" class="title"></span><br />
                    <span id="place-address"></span>
                </div>-->
        <!--        <form>
                    <input onchange="getCoords()" id="ubicacion"/>
                    <button type="submit">send</button>
                    <input type=""/>
                </form>-->

        <div class="container">
            <h3 th:text="'Anfitrión: ' + ${usuario.name}"></h3>
            <form th:action="@{/evento/save}" th:object="${evento}" method="POST">
                <h5 th:text="${error}"></h5>
                <input type="hidden" id="lat" th:field="*{lat}"/>
                <input type="hidden" id="lon" th:field="*{lon}"/>
                <div class="form-group">
                    <label>Url de Google Maps</label>
                    <input type="text" class="form-control" id="ubicacion" onchange="getCoords()" aria-describedby="emailHelp" placeholder="Url de Google Maps">
                </div>
                <div class="form-group mt-3">
                    <label>Nombre</label>
                    <input type="text" class="form-control" th:field="*{nombre}" aria-describedby="emailHelp" placeholder="Nombre">
                </div>
                <div class="form-group mt-3">
                    <label>Descripción</label>
                    <textarea type="text" class="form-control" th:field="*{descripcion}" aria-describedby="emailHelp" placeholder="Descripción"></textarea>
                </div>
                <div class="form-group mt-3">
                    <label>Tipo de evento</label>
                    <select class="form-select" aria-label="Default select example" name="tipoDeEvento">
                        <option th:each="tipoEvento : ${T(com.quintoimpacto.turismomendoza.app.enums.TipoDeEvento).values()}" 
                                th:value="${tipoEvento}" th:text="${tipoEvento.alias}"></option>
                    </select>
                </div>
                 <div class="form-group mt-3">
                    <label>Acceso</label>
                    <select class="form-select" aria-label="Default select example" name="acceso">
                        <option th:each="acceso : ${T(com.quintoimpacto.turismomendoza.app.enums.Acceso).values()}" 
                                th:value="${acceso}" th:text="${acceso.alias}"></option>
                    </select>
                </div>
                <div class="form-group mt-3">
                    <label>Fecha</label>
                    <input type="date" name="fecha" class="form-control" id="exampleInputPassword1">
                </div>
                 <div class="form-group mt-3">
                    <label>Horario</label>
                    <div class="d-flex">
                        <input type="text" name="horario" class="form-control" id="desde">
                        <input type="text" name="horario" class="form-control" id="hasta" onchange="join()">
                    </div>
                </div>
                <input th:field="*{horario}" th:value="*{horario}" type="hidden" id="horarioCompleto">
                <button type="submit" class="btn btn-primary mt-3">Crear</button>
            </form>
        </div>
        
        <script>
            const join = () => {
                const desde = document.querySelector('#desde');
                if(desde.value === null) desde.value = '';
                const hasta = document.querySelector('#hasta');
                if(hasta.value === null) hasta.value = '';
                document.querySelector('#horarioCompleto').value = desde.value + ' - ' + hasta.value;
                console.log(document.querySelector('#horarioCompleto').value)
            }
        </script>

        <script>
            const getCoords = () => {
                const inputValue = document.querySelector('#ubicacion').value.split('@');
                const inputHidden = document.querySelector('#coords');
                document.querySelector('#lat').value = inputValue[1].split(',')[0];
                document.querySelector('#lon').value = inputValue[1].split(',')[1];
//                inputHidden.value = first + ',' + second;
            }
        </script>

        <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
        <!--        <script
                    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBuKwx0tncTqbCsSStZ3XP_LAIfy6_pnsY&callback=initMap&libraries=places&v=weekly"
                    async
                ></script>-->
    </body>
</html>